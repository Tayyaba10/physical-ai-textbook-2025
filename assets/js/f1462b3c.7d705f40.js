"use strict";(globalThis.webpackChunkai_native_robotics_textbook=globalThis.webpackChunkai_native_robotics_textbook||[]).push([[7464],{1579:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>m});const i=JSON.parse('{"id":"module-1-robotic-nervous-system/ch4-urdf-xacro-modeling","title":"ch4-urdf-xacro-modeling","description":"-----","source":"@site/docs/module-1-robotic-nervous-system/ch4-urdf-xacro-modeling.md","sourceDirName":"module-1-robotic-nervous-system","slug":"/module-1-robotic-nervous-system/ch4-urdf-xacro-modeling","permalink":"/physical-ai-textbook-2025/docs/module-1-robotic-nervous-system/ch4-urdf-xacro-modeling","draft":false,"unlisted":false,"editUrl":"https://github.com/Tayyaba10/physical-ai-textbook-2025/edit/main/docs/module-1-robotic-nervous-system/ch4-urdf-xacro-modeling.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"ch3-bridging-ai-agents","permalink":"/physical-ai-textbook-2025/docs/module-1-robotic-nervous-system/ch3-bridging-ai-agents"},"next":{"title":"ch5-building-launching-packages","permalink":"/physical-ai-textbook-2025/docs/module-1-robotic-nervous-system/ch5-building-launching-packages"}}');var a=e(4848),o=e(8453),t=e(7242);const l={},s=void 0,c={},m=[{value:"title: Ch4  URDF &amp; Xacro for Humanoid Modeling\r\nmodule: 1\r\nchapter: 4\r\nsidebar_label: Ch4: URDF &amp; Xacro for Humanoid Modeling\r\ndescription: Creating humanoid robot models using URDF and Xacro in ROS 2\r\ntags: [ros2, urdf, xacro, modeling, humanoid, robot]\r\ndifficulty: intermediate\r\nestimated_duration: 90",id:"title-ch4--urdf--xacro-for-humanoid-modelingmodule-1chapter-4sidebar_label-ch4-urdf--xacro-for-humanoid-modelingdescription-creating-humanoid-robot-models-using-urdf-and-xacro-in-ros-2tags-ros2-urdf-xacro-modeling-humanoid-robotdifficulty-intermediateestimated_duration-90",level:2},{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Theory",id:"theory",level:2},{value:"URDF (Unified Robot Description Format)",id:"urdf-unified-robot-description-format",level:3},{value:"Xacro (XML Macros)",id:"xacro-xml-macros",level:3},{value:"Humanoid Robot Topology",id:"humanoid-robot-topology",level:3},{value:"StepbyStep Labs",id:"stepbystep-labs",level:2},{value:"Lab 1: Creating a Simple URDF Model",id:"lab-1-creating-a-simple-urdf-model",level:3},{value:"Lab 2: Converting to Xacro",id:"lab-2-converting-to-xacro",level:3},{value:"Lab 3: Validating the Robot Model",id:"lab-3-validating-the-robot-model",level:3},{value:"Runnable Code Example",id:"runnable-code-example",level:2},{value:"Sample launch file to visualize the robot (<code>launch/humanoid_display.launch.py</code>):",id:"sample-launch-file-to-visualize-the-robot-launchhumanoid_displaylaunchpy",level:3},{value:"Miniproject",id:"miniproject",level:2},{value:"Summary",id:"summary",level:2}];function d(r){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...r.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"title-ch4--urdf--xacro-for-humanoid-modelingmodule-1chapter-4sidebar_label-ch4-urdf--xacro-for-humanoid-modelingdescription-creating-humanoid-robot-models-using-urdf-and-xacro-in-ros-2tags-ros2-urdf-xacro-modeling-humanoid-robotdifficulty-intermediateestimated_duration-90",children:"title: Ch4  URDF & Xacro for Humanoid Modeling\r\nmodule: 1\r\nchapter: 4\r\nsidebar_label: Ch4: URDF & Xacro for Humanoid Modeling\r\ndescription: Creating humanoid robot models using URDF and Xacro in ROS 2\r\ntags: [ros2, urdf, xacro, modeling, humanoid, robot]\r\ndifficulty: intermediate\r\nestimated_duration: 90"}),"\n","\n",(0,a.jsx)(n.h1,{id:"urdf--xacro-for-humanoid-modeling",children:"URDF & Xacro for Humanoid Modeling"}),"\n",(0,a.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,a.jsx)(n.p,{children:"Understand the Unified Robot Description Format (URDF) for robot modeling\r\nCreate complex humanoid robot models using URDF\r\nUtilize Xacro macros to simplify and parameterize robot models\r\nImplement joint constraints and physical properties for realistic simulation\r\nValidate robot models using ROS 2 tools\r\nIntegrate robot models with ROS 2 simulation environments"}),"\n",(0,a.jsx)(n.h2,{id:"theory",children:"Theory"}),"\n",(0,a.jsx)(n.h3,{id:"urdf-unified-robot-description-format",children:"URDF (Unified Robot Description Format)"}),"\n",(0,a.jsx)(n.p,{children:"URDF is an XML format used to describe robots in ROS. It defines the robot's physical structure including links (rigid bodies), joints (connections between links), and other properties like visual appearance and collision properties."}),"\n",(0,a.jsxs)(n.p,{children:["Key components of a URDF:\r\n",(0,a.jsx)(n.strong,{children:"Links"}),": Rigid bodies that represent parts of the robot\r\n",(0,a.jsx)(n.strong,{children:"Joints"}),": Connections between links that define how they move relative to each other\r\n",(0,a.jsx)(n.strong,{children:"Visual"}),": How the robot appears in simulation and visualization tools\r\n",(0,a.jsx)(n.strong,{children:"Collision"}),": How the robot interacts physically with the environment\r\n",(0,a.jsx)(n.strong,{children:"Inertial"}),": Mass and inertia properties for physics simulation"]}),"\n",(0,a.jsx)(n.h3,{id:"xacro-xml-macros",children:"Xacro (XML Macros)"}),"\n",(0,a.jsx)(n.p,{children:"Xacro is an XML macro language that simplifies URDF creation by allowing:\r\nParameterization of robot models\r\nReusable components through macros\r\nMathematical expressions\r\nFile inclusion"}),"\n",(0,a.jsxs)(n.p,{children:["Xacro files have the ",(0,a.jsx)(n.code,{children:".xacro"})," extension and are preprocessed to generate URDF."]}),"\n",(0,a.jsx)(n.h3,{id:"humanoid-robot-topology",children:"Humanoid Robot Topology"}),"\n",(0,a.jsx)(t.A,{chart:"\ngraph TD;\n  A[Torso] > B[Head];\n  A > C[Left Arm];\n  A > D[Right Arm];\n  A > E[Left Leg];\n  A > F[Right Leg];\n  \n  C > G[Left Shoulder];\n  G > H[Left Elbow];\n  H > I[Left Hand];\n  \n  D > J[Right Shoulder];\n  J > K[Right Elbow];\n  K > L[Right Hand];\n  \n  E > M[Left Hip];\n  M > N[Left Knee];\n  N > O[Left Foot];\n  \n  F > P[Right Hip];\n  P > Q[Right Knee];\n  Q > R[Right Foot];\n  \n  style A fill:#4CAF50,stroke:#388E3C,color:#fff;\n  style B fill:#2196F3,stroke:#0D47A1,color:#fff;\n  style C fill:#FF9800,stroke:#E65100,color:#fff;\n  style D fill:#FF9800,stroke:#E65100,color:#fff;\n  style E fill:#9C27B0,stroke:#4A148C,color:#fff;\n  style F fill:#9C27B0,stroke:#4A148C,color:#fff;\n"}),"\n",(0,a.jsx)(n.p,{children:"Humanoid robots have a complex kinematic structure that mimics human anatomy, requiring careful modeling of multiple degrees of freedom in limbs."}),"\n",(0,a.jsx)(n.h2,{id:"stepbystep-labs",children:"StepbyStep Labs"}),"\n",(0,a.jsx)(n.h3,{id:"lab-1-creating-a-simple-urdf-model",children:"Lab 1: Creating a Simple URDF Model"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Create a robot description package"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create buildtype ament_cmake robot_description\r\ncd robot_description\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Create a URDF file"})," (",(0,a.jsx)(n.code,{children:"urdf/simple_humanoid.urdf"}),"):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="simple_humanoid">\r\n  <! Base Link >\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <capsule length="0.2" radius="0.1"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <capsule length="0.2" radius="0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="10.0"/>\r\n      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <! Head >\r\n  <link name="head">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius="0.1"/>\r\n      </geometry>\r\n      <material name="white">\r\n        <color rgba="1 1 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <sphere radius="0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="2.0"/>\r\n      <inertia ixx="0.008" ixy="0.0" ixz="0.0" iyy="0.008" iyz="0.0" izz="0.008"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <! Joint connecting head to torso >\r\n  <joint name="neck_joint" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="head"/>\r\n    <origin xyz="0 0 0.2" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="1.0" upper="1.0" effort="100" velocity="1"/>\r\n  </joint>\r\n  \r\n  <! Left Arm >\r\n  <link name="left_upper_arm">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder length="0.3" radius="0.05"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.5 0.5 0.5 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder length="0.3" radius="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.0075" ixy="0.0" ixz="0.0" iyy="0.0075" iyz="0.0" izz="0.00125"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <joint name="left_shoulder_joint" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="left_upper_arm"/>\r\n    <origin xyz="0.15 0 0.1" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="1.57" upper="1.57" effort="100" velocity="1"/>\r\n  </joint>\r\n</robot>\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Install the URDF file"})," by updating ",(0,a.jsx)(n.code,{children:"CMakeLists.txt"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cmake",children:"cmake_minimum_required(VERSION 3.8)\r\nproject(robot_description)\r\n\r\nfind_package(ament_cmake REQUIRED)\r\n\r\n# Install URDF files\r\ninstall(DIRECTORY urdf\r\n  DESTINATION share/${PROJECT_NAME})\r\n\r\nament_package()\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"lab-2-converting-to-xacro",children:"Lab 2: Converting to Xacro"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Create a Xacro file"})," (",(0,a.jsx)(n.code,{children:"urdf/humanoid.xacro"}),"):","\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="humanoid">\r\n  <! Define properties >\r\n  <xacro:property name="M_PI" value="3.1415926535897931"/>\r\n  <xacro:property name="base_mass" value="10.0"/>\r\n  <xacro:property name="head_mass" value="2.0"/>\r\n  <xacro:property name="arm_mass" value="1.0"/>\r\n  <xacro:property name="leg_mass" value="3.0"/>\r\n  \r\n  <! Base Link >\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <capsule length="0.2" radius="0.1"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <capsule length="0.2" radius="0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="${base_mass}"/>\r\n      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <! Head Macro >\r\n  <xacro:macro name="head" params="parent xyz rpy">\r\n    <joint name="neck_joint" type="revolute">\r\n      <parent link="${parent}"/>\r\n      <child link="head"/>\r\n      <origin xyz="${xyz}" rpy="${rpy}"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="1.0" upper="1.0" effort="100" velocity="1"/>\r\n    </joint>\r\n    \r\n    <link name="head">\r\n      <visual>\r\n        <geometry>\r\n          <sphere radius="0.1"/>\r\n        </geometry>\r\n        <material name="white">\r\n          <color rgba="1 1 1 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <sphere radius="0.1"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${head_mass}"/>\r\n        <inertia ixx="0.008" ixy="0.0" ixz="0.0" iyy="0.008" iyz="0.0" izz="0.008"/>\r\n      </inertial>\r\n    </link>\r\n  </xacro:macro>\r\n  \r\n  <! Arm Macro >\r\n  <xacro:macro name="arm" params="side parent xyz rpy">\r\n    <joint name="${side}_shoulder_joint" type="revolute">\r\n      <parent link="${parent}"/>\r\n      <child link="${side}_upper_arm"/>\r\n      <origin xyz="${xyz}" rpy="${rpy}"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="1.57" upper="1.57" effort="100" velocity="1"/>\r\n    </joint>\r\n    \r\n    <link name="${side}_upper_arm">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.3" radius="0.05"/>\r\n        </geometry>\r\n        <material name="gray">\r\n          <color rgba="0.5 0.5 0.5 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.3" radius="0.05"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${arm_mass}"/>\r\n        <inertia ixx="0.0075" ixy="0.0" ixz="0.0" iyy="0.0075" iyz="0.0" izz="0.00125"/>\r\n      </inertial>\r\n    </link>\r\n    \r\n    <joint name="${side}_elbow_joint" type="revolute">\r\n      <parent link="${side}_upper_arm"/>\r\n      <child link="${side}_lower_arm"/>\r\n      <origin xyz="0 0 0.3" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="1.57" upper="1.57" effort="100" velocity="1"/>\r\n    </joint>\r\n    \r\n    <link name="${side}_lower_arm">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.25" radius="0.04"/>\r\n        </geometry>\r\n        <material name="gray">\r\n          <color rgba="0.5 0.5 0.5 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.25" radius="0.04"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${arm_mass * 0.7}"/>\r\n        <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.001"/>\r\n      </inertial>\r\n    </link>\r\n  </xacro:macro>\r\n  \r\n  <! Leg Macro >\r\n  <xacro:macro name="leg" params="side parent xyz rpy">\r\n    <joint name="${side}_hip_joint" type="revolute">\r\n      <parent link="${parent}"/>\r\n      <child link="${side}_upper_leg"/>\r\n      <origin xyz="${xyz}" rpy="${rpy}"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="1.0" upper="1.0" effort="200" velocity="1"/>\r\n    </joint>\r\n    \r\n    <link name="${side}_upper_leg">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.4" radius="0.06"/>\r\n        </geometry>\r\n        <material name="brown">\r\n          <color rgba="0.6 0.4 0.2 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.4" radius="0.06"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${leg_mass}"/>\r\n        <inertia ixx="0.016" ixy="0.0" ixz="0.0" iyy="0.016" iyz="0.0" izz="0.0018"/>\r\n      </inertial>\r\n    </link>\r\n    \r\n    <joint name="${side}_knee_joint" type="revolute">\r\n      <parent link="${side}_upper_leg"/>\r\n      <child link="${side}_lower_leg"/>\r\n      <origin xyz="0 0 0.4" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="0.0" upper="1.57" effort="200" velocity="1"/>\r\n    </joint>\r\n    \r\n    <link name="${side}_lower_leg">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.35" radius="0.05"/>\r\n        </geometry>\r\n        <material name="brown">\r\n          <color rgba="0.6 0.4 0.2 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.35" radius="0.05"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${leg_mass * 0.8}"/>\r\n        <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0015"/>\r\n      </inertial>\r\n    </link>\r\n    \r\n    <joint name="${side}_ankle_joint" type="revolute">\r\n      <parent link="${side}_lower_leg"/>\r\n      <child link="${side}_foot"/>\r\n      <origin xyz="0 0 0.35" rpy="0 0 0"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="0.5" upper="0.5" effort="100" velocity="1"/>\r\n    </joint>\r\n    \r\n    <link name="${side}_foot">\r\n      <visual>\r\n        <geometry>\r\n          <box size="0.2 0.1 0.05"/>\r\n        </geometry>\r\n        <material name="black">\r\n          <color rgba="0 0 0 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <box size="0.2 0.1 0.05"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${leg_mass * 0.3}"/>\r\n        <inertia ixx="0.0005" ixy="0.0" ixz="0.0" iyy="0.0017" iyz="0.0" izz="0.0013"/>\r\n      </inertial>\r\n    </link>\r\n  </xacro:macro>\r\n  \r\n  <! Use the macros to build the robot >\r\n  <xacro:head parent="base_link" xyz="0 0 0.2" rpy="0 0 0"/>\r\n  <xacro:arm side="left" parent="base_link" xyz="0.15 0 0.1" rpy="0 0 0"/>\r\n  <xacro:arm side="right" parent="base_link" xyz="0.15 0 0.1" rpy="0 0 0"/>\r\n  <xacro:leg side="left" parent="base_link" xyz="0.07 0 0.2" rpy="0 0 0"/>\r\n  <xacro:leg side="right" parent="base_link" xyz="0.07 0 0.2" rpy="0 0 0"/>\r\n</robot>\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"lab-3-validating-the-robot-model",children:"Lab 3: Validating the Robot Model"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Check the URDF"})," with xacro:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Convert xacro to URDF\r\nros2 run xacro xacro inorder urdf/humanoid.xacro > temp.urdf\r\n\r\n# Check for errors\r\ncheck_urdf temp.urdf\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Visualize the robot"})," using RViz:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Launch RViz with robot model\r\nros2 run rviz2 rviz2 d `ros2 pkg prefix robot_description`/share/robot_description/rviz/humanoid.rviz\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Create a launch file"})," (",(0,a.jsx)(n.code,{children:"launch/display.launch.py"}),"):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Find the package share directory\r\n    pkg_share = get_package_share_directory('robot_description')\r\n    \r\n    # Create launch configuration variables\r\n    use_sim_time = LaunchConfiguration('use_sim_time')\r\n    \r\n    # Declare launch arguments\r\n    declare_use_sim_time = DeclareLaunchArgument(\r\n        'use_sim_time',\r\n        default_value='false',\r\n        description='Use simulation (Gazebo) clock if true')\r\n    \r\n    # Create robot state publisher node\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        name='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[{\r\n            'use_sim_time': use_sim_time,\r\n            'robot_description': open(\r\n                os.path.join(pkg_share, 'urdf/humanoid.xacro')\r\n            ).read()\r\n        }])\r\n    \r\n    # Create joint state publisher GUI\r\n    joint_state_publisher_gui = Node(\r\n        package='joint_state_publisher_gui',\r\n        executable='joint_state_publisher_gui',\r\n        name='joint_state_publisher_gui',\r\n        output='screen')\r\n    \r\n    # Create RViz node\r\n    rviz = Node(\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        name='rviz2',\r\n        output='screen',\r\n        parameters=[{'use_sim_time': use_sim_time}],\r\n        arguments=['d', os.path.join(pkg_share, 'rviz/humanoid.rviz')])\r\n    \r\n    # Create nodes and launch description\r\n    ld = LaunchDescription()\r\n    \r\n    # Add launch arguments\r\n    ld.add_action(declare_use_sim_time)\r\n    \r\n    # Add nodes\r\n    ld.add_action(robot_state_publisher)\r\n    ld.add_action(joint_state_publisher_gui)\r\n    ld.add_action(rviz)\r\n    \r\n    return ld\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"runnable-code-example",children:"Runnable Code Example"}),"\n",(0,a.jsx)(n.p,{children:"Here's a complete Xacro file for a more sophisticated humanoid model with gaze sensors:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="advanced_humanoid">\r\n  <! Define properties >\r\n  <xacro:property name="M_PI" value="3.1415926535897931"/>\r\n  <xacro:property name="base_mass" value="10.0"/>\r\n  <xacro:property name="head_mass" value="2.0"/>\r\n  <xacro:property name="arm_mass" value="1.0"/>\r\n  <xacro:property name="leg_mass" value="3.0"/>\r\n\r\n  <! Include gazebo plugins >\r\n  <xacro:include filename="$(find gazebo_plugins)/urdf/camera.gazebo.xacro"/>\r\n  \r\n  <! Materials >\r\n  <material name="blue">\r\n    <color rgba="0 0 1 1"/>\r\n  </material>\r\n  <material name="white">\r\n    <color rgba="1 1 1 1"/>\r\n  </material>\r\n  <material name="gray">\r\n    <color rgba="0.5 0.5 0.5 1"/>\r\n  </material>\r\n  <material name="brown">\r\n    <color rgba="0.6 0.4 0.2 1"/>\r\n  </material>\r\n  <material name="black">\r\n    <color rgba="0 0 0 1"/>\r\n  </material>\r\n\r\n  <! Base Link >\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <capsule length="0.2" radius="0.1"/>\r\n      </geometry>\r\n      <material name="blue"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <capsule length="0.2" radius="0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="${base_mass}"/>\r\n      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <! Gazebo plugin for robot >\r\n  <gazebo>\r\n    <plugin name="ground_truth" filename="libgazebo_ros_p3d.so">\r\n      <alwaysOn>true</alwaysOn>\r\n      <updateRate>30.0</updateRate>\r\n      <bodyName>base_link</bodyName>\r\n      <topicName>ground_truth/state</topicName>\r\n      <gaussianNoise>0.01</gaussianNoise>\r\n      <frameName>map</frameName>\r\n    </plugin>\r\n  </gazebo>\r\n\r\n  <! Head Macro with sensor >\r\n  <xacro:macro name="head_with_sensor" params="parent xyz rpy">\r\n    <joint name="neck_joint" type="revolute">\r\n      <parent link="${parent}"/>\r\n      <child link="head"/>\r\n      <origin xyz="${xyz}" rpy="${rpy}"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="1.0" upper="1.0" effort="100" velocity="1"/>\r\n    </joint>\r\n\r\n    <link name="head">\r\n      <visual>\r\n        <geometry>\r\n          <sphere radius="0.1"/>\r\n        </geometry>\r\n        <material name="white"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <sphere radius="0.1"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${head_mass}"/>\r\n        <inertia ixx="0.008" ixy="0.0" ixz="0.0" iyy="0.008" iyz="0.0" izz="0.008"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <! Camera sensor in head >\r\n    <joint name="camera_joint" type="fixed">\r\n      <parent link="head"/>\r\n      <child link="camera_link"/>\r\n      <origin xyz="0.05 0 0" rpy="0 0 0"/>\r\n    </joint>\r\n\r\n    <link name="camera_link">\r\n      <visual>\r\n        <geometry>\r\n          <box size="0.02 0.04 0.02"/>\r\n        </geometry>\r\n        <material name="black"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <box size="0.02 0.04 0.02"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="0.1"/>\r\n        <inertia ixx="1e6" ixy="0" ixz="0" iyy="1e6" iyz="0" izz="1e6"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <! Gazebo camera sensor >\r\n    <gazebo reference="camera_link">\r\n      <sensor type="camera" name="camera1">\r\n        <update_rate>30.0</update_rate>\r\n        <camera name="head_camera">\r\n          <horizontal_fov>1.3962634</horizontal_fov>\r\n          <image>\r\n            <width>800</width>\r\n            <height>600</height>\r\n            <format>R8G8B8</format>\r\n          </image>\r\n          <clip>\r\n            <near>0.02</near>\r\n            <far>300</far>\r\n          </clip>\r\n        </camera>\r\n        <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\r\n          <frame_name>camera_link</frame_name>\r\n          <min_depth>0.1</min_depth>\r\n          <max_depth>100.0</max_depth>\r\n        </plugin>\r\n      </sensor>\r\n    </gazebo>\r\n  </xacro:macro>\r\n\r\n  <! Arm Macro >\r\n  <xacro:macro name="arm" params="side parent xyz rpy">\r\n    <joint name="${side}_shoulder_joint" type="revolute">\r\n      <parent link="${parent}"/>\r\n      <child link="${side}_upper_arm"/>\r\n      <origin xyz="${xyz}" rpy="${rpy}"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="1.57" upper="1.57" effort="100" velocity="1"/>\r\n    </joint>\r\n\r\n    <link name="${side}_upper_arm">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.3" radius="0.05"/>\r\n        </geometry>\r\n        <material name="gray"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.3" radius="0.05"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${arm_mass}"/>\r\n        <inertia ixx="0.0075" ixy="0.0" ixz="0.0" iyy="0.0075" iyz="0.0" izz="0.00125"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <joint name="${side}_elbow_joint" type="revolute">\r\n      <parent link="${side}_upper_arm"/>\r\n      <child link="${side}_lower_arm"/>\r\n      <origin xyz="0 0 0.3" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="1.57" upper="1.57" effort="100" velocity="1"/>\r\n    </joint>\r\n\r\n    <link name="${side}_lower_arm">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.25" radius="0.04"/>\r\n        </geometry>\r\n        <material name="gray"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.25" radius="0.04"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${arm_mass * 0.7}"/>\r\n        <inertia ixx="0.005" ixy="0.0" ixz="0.0" iyy="0.005" iyz="0.0" izz="0.001"/>\r\n      </inertial>\r\n    </link>\r\n  </xacro:macro>\r\n\r\n  <! Leg Macro >\r\n  <xacro:macro name="leg" params="side parent xyz rpy">\r\n    <joint name="${side}_hip_joint" type="revolute">\r\n      <parent link="${parent}"/>\r\n      <child link="${side}_upper_leg"/>\r\n      <origin xyz="${xyz}" rpy="${rpy}"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="1.57" upper="1.57" effort="200" velocity="1"/>\r\n    </joint>\r\n\r\n    <link name="${side}_upper_leg">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.4" radius="0.06"/>\r\n        </geometry>\r\n        <material name="brown"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.4" radius="0.06"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${leg_mass}"/>\r\n        <inertia ixx="0.016" ixy="0.0" ixz="0.0" iyy="0.016" iyz="0.0" izz="0.0018"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <joint name="${side}_knee_joint" type="revolute">\r\n      <parent link="${side}_upper_leg"/>\r\n      <child link="${side}_lower_leg"/>\r\n      <origin xyz="0 0 0.4" rpy="0 0 0"/>\r\n      <axis xyz="1 0 0"/>\r\n      <limit lower="0.0" upper="1.57" effort="200" velocity="1"/>\r\n    </joint>\r\n\r\n    <link name="${side}_lower_leg">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder length="0.35" radius="0.05"/>\r\n        </geometry>\r\n        <material name="brown"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder length="0.35" radius="0.05"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${leg_mass * 0.8}"/>\r\n        <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0015"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <joint name="${side}_ankle_joint" type="revolute">\r\n      <parent link="${side}_lower_leg"/>\r\n      <child link="${side}_foot"/>\r\n      <origin xyz="0 0 0.35" rpy="0 0 0"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="0.5" upper="0.5" effort="100" velocity="1"/>\r\n    </joint>\r\n\r\n    <link name="${side}_foot">\r\n      <visual>\r\n        <geometry>\r\n          <box size="0.2 0.1 0.05"/>\r\n        </geometry>\r\n        <material name="black"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <box size="0.2 0.1 0.05"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${leg_mass * 0.3}"/>\r\n        <inertia ixx="0.0005" ixy="0.0" ixz="0.0" iyy="0.0017" iyz="0.0" izz="0.0013"/>\r\n      </inertial>\r\n    </link>\r\n  </xacro:macro>\r\n\r\n  <! Use the macros to build the robot >\r\n  <xacro:head_with_sensor parent="base_link" xyz="0 0 0.2" rpy="0 0 0"/>\r\n  <xacro:arm side="left" parent="base_link" xyz="0.15 0 0.1" rpy="0 0 0"/>\r\n  <xacro:arm side="right" parent="base_link" xyz="0.15 0 0.1" rpy="0 0 0"/>\r\n  <xacro:leg side="left" parent="base_link" xyz="0.07 0 0.2" rpy="0 0 0"/>\r\n  <xacro:leg side="right" parent="base_link" xyz="0.07 0 0.2" rpy="0 0 0"/>\r\n  \r\n  <! Gazebo environment settings >\r\n  <gazebo>\r\n    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">\r\n      <robotNamespace>/humanoid</robotNamespace>\r\n    </plugin>\r\n  </gazebo>\r\n</robot>\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"sample-launch-file-to-visualize-the-robot-launchhumanoid_displaylaunchpy",children:["Sample launch file to visualize the robot (",(0,a.jsx)(n.code,{children:"launch/humanoid_display.launch.py"}),"):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Find the package share directory\r\n    pkg_share = get_package_share_directory('robot_description')\r\n    \r\n    # Create launch configuration variables\r\n    use_sim_time = LaunchConfiguration('use_sim_time')\r\n    \r\n    # Declare launch arguments\r\n    declare_use_sim_time = DeclareLaunchArgument(\r\n        'use_sim_time',\r\n        default_value='false',\r\n        description='Use simulation (Gazebo) clock if true')\r\n    \r\n    # Create robot state publisher node\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        name='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[{\r\n            'use_sim_time': use_sim_time,\r\n            'robot_description': open(\r\n                os.path.join(pkg_share, 'urdf/humanoid.xacro')\r\n            ).read()\r\n        }])\r\n    \r\n    # Create joint state publisher GUI\r\n    joint_state_publisher_gui = Node(\r\n        package='joint_state_publisher_gui',\r\n        executable='joint_state_publisher_gui',\r\n        name='joint_state_publisher_gui',\r\n        output='screen')\r\n    \r\n    # Create RViz node\r\n    rviz = Node(\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        name='rviz2',\r\n        output='screen',\r\n        parameters=[{'use_sim_time': use_sim_time}])\r\n    \r\n    # Create nodes and launch description\r\n    ld = LaunchDescription()\r\n    \r\n    # Add launch arguments\r\n    ld.add_action(declare_use_sim_time)\r\n    \r\n    # Add nodes\r\n    ld.add_action(robot_state_publisher)\r\n    ld.add_action(joint_state_publisher_gui)\r\n    ld.add_action(rviz)\r\n    \r\n    return ld\n"})}),"\n",(0,a.jsx)(n.h2,{id:"miniproject",children:"Miniproject"}),"\n",(0,a.jsx)(n.p,{children:"Create a complete humanoid robot model with the following requirements:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Model should include at least 20 joints (head, 2 arms with 3 joints each, 2 legs with 3 joints each)"}),"\n",(0,a.jsx)(n.li,{children:"Include at least 2 sensors (camera in head, IMU in torso)"}),"\n",(0,a.jsx)(n.li,{children:"Use Xacro macros to avoid repetition in the model"}),"\n",(0,a.jsx)(n.li,{children:"Parameterize the model so different sizes can be created"}),"\n",(0,a.jsx)(n.li,{children:"Include realistic inertial properties for all links"}),"\n",(0,a.jsx)(n.li,{children:"Add Gazebo plugins for physics simulation"}),"\n",(0,a.jsx)(n.li,{children:"Create a launch file to visualize the model in RViz"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Validate your model by checking for errors and visualizing it in RViz before submission."}),"\n",(0,a.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(n.p,{children:"This chapter covered the creation of humanoid robot models using URDF and Xacro in ROS 2:"}),"\n",(0,a.jsx)(n.p,{children:"URDF is the standard XML format for describing robot models\r\nXacro enhances URDF with macros, parameters, and mathematical expressions\r\nHumanoid robots require complex kinematic structures with multiple degrees of freedom\r\nProper inertial properties are essential for realistic simulation\r\nSensors and plugins can be included to enhance the robot model functionality"}),"\n",(0,a.jsx)(n.p,{children:"Creating accurate robot models is fundamental to successful robotics simulation and development, allowing developers to test algorithms before deployment on real hardware."})]})}function u(r={}){const{wrapper:n}={...(0,o.R)(),...r.components};return n?(0,a.jsx)(n,{...r,children:(0,a.jsx)(d,{...r})}):d(r)}}}]);