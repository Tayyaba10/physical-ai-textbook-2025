"use strict";(globalThis.webpackChunkai_native_robotics_textbook=globalThis.webpackChunkai_native_robotics_textbook||[]).push([[2229],{4379:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"module-1-robotic-nervous-system/ch1-why-ros2","title":"ch1-why-ros2","description":"-","source":"@site/docs/module-1-robotic-nervous-system/ch1-why-ros2.md","sourceDirName":"module-1-robotic-nervous-system","slug":"/module-1-robotic-nervous-system/ch1-why-ros2","permalink":"/physical-ai-textbook-2025/docs/module-1-robotic-nervous-system/ch1-why-ros2","draft":false,"unlisted":false,"editUrl":"https://github.com/Tayyaba10/physical-ai-textbook-2025/edit/main/docs/module-1-robotic-nervous-system/ch1-why-ros2.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"overview","permalink":"/physical-ai-textbook-2025/docs/overview"},"next":{"title":"ch2-nodes-topics-services-actions","permalink":"/physical-ai-textbook-2025/docs/module-1-robotic-nervous-system/ch2-nodes-topics-services-actions"}}');var s=r(4848),t=r(8453),l=r(7242);const o={},a=void 0,c={},d=[{value:"title: Ch1 - Why ROS 2 - Robotic Middleware Evolution\r\nmodule: 1\r\nchapter: 1\r\nsidebar_label: &quot;Ch1: Why ROS 2&quot;\r\ndescription: Understanding the evolution from ROS 1 to ROS 2 and the modern robotic middleware landscape\r\ntags: [ros2, middleware, introduction, robotics]\r\ndifficulty: beginner\r\nestimated_duration: 45",id:"title-ch1---why-ros-2---robotic-middleware-evolutionmodule-1chapter-1sidebar_label-ch1-why-ros-2description-understanding-the-evolution-from-ros-1-to-ros-2-and-the-modern-robotic-middleware-landscapetags-ros2-middleware-introduction-roboticsdifficulty-beginnerestimated_duration-45",level:2},{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Theory",id:"theory",level:2},{value:"The Evolution from ROS 1 to ROS 2",id:"the-evolution-from-ros-1-to-ros-2",level:3},{value:"Key Architectural Changes",id:"key-architectural-changes",level:3},{value:"DDS in ROS 2",id:"dds-in-ros-2",level:3},{value:"Quality of Service (QoS) Profiles",id:"quality-of-service-qos-profiles",level:3},{value:"Step-by-Step Labs",id:"step-by-step-labs",level:2},{value:"Lab 1: Setting up ROS 2 Environment",id:"lab-1-setting-up-ros-2-environment",level:3},{value:"Lab 2: Create Your First ROS 2 Workspace",id:"lab-2-create-your-first-ros-2-workspace",level:3},{value:"Lab 3: Run the Talker/Listener Example",id:"lab-3-run-the-talkerlistener-example",level:3},{value:"Runnable Code Example",id:"runnable-code-example",level:2},{value:"CMakeLists.txt for the C++ publisher:",id:"cmakeliststxt-for-the-c-publisher",level:3},{value:"package.xml for the package:",id:"packagexml-for-the-package",level:3},{value:"Mini-project",id:"mini-project",level:2},{value:"Summary",id:"summary",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"title-ch1---why-ros-2---robotic-middleware-evolutionmodule-1chapter-1sidebar_label-ch1-why-ros-2description-understanding-the-evolution-from-ros-1-to-ros-2-and-the-modern-robotic-middleware-landscapetags-ros2-middleware-introduction-roboticsdifficulty-beginnerestimated_duration-45",children:'title: Ch1 - Why ROS 2 - Robotic Middleware Evolution\r\nmodule: 1\r\nchapter: 1\r\nsidebar_label: "Ch1: Why ROS 2"\r\ndescription: Understanding the evolution from ROS 1 to ROS 2 and the modern robotic middleware landscape\r\ntags: [ros2, middleware, introduction, robotics]\r\ndifficulty: beginner\r\nestimated_duration: 45'}),"\n","\n",(0,s.jsx)(n.h1,{id:"why-ros-2---robotic-middleware-evolution",children:"Why ROS 2 - Robotic Middleware Evolution"}),"\n",(0,s.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand the fundamental differences between ROS 1 and ROS 2"}),"\n",(0,s.jsx)(n.li,{children:"Identify key architectural changes that make ROS 2 suitable for production robotics"}),"\n",(0,s.jsx)(n.li,{children:"Recognize the advantages of ROS 2 for building robust, scalable robotic applications"}),"\n",(0,s.jsx)(n.li,{children:"Explain how ROS 2 addresses limitations of ROS 1"}),"\n",(0,s.jsx)(n.li,{children:"Know when to choose ROS 2 over other middleware solutions"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"theory",children:"Theory"}),"\n",(0,s.jsx)(n.h3,{id:"the-evolution-from-ros-1-to-ros-2",children:"The Evolution from ROS 1 to ROS 2"}),"\n",(0,s.jsx)(n.p,{children:"Robot Operating System (ROS) has been a pivotal framework in robotics research and development since its inception in 2007. However, as robotics applications evolved from research prototypes to production systems, the limitations of ROS 1 became increasingly apparent."}),"\n",(0,s.jsx)(n.p,{children:"ROS 1 was built around a single-master architecture, which created a central point of failure. If the master node went down, the entire system would collapse. This architecture was acceptable for research environments but not for production systems where reliability is critical."}),"\n",(0,s.jsx)(n.p,{children:"ROS 2, released in 2015 with the initial Alpha version and reaching its first Long Term Support (LTS) release in 2018, addresses these limitations by adopting a distributed architecture based on Data Distribution Service (DDS). DDS is a middleware standard designed for real-time systems with high reliability and performance requirements."}),"\n",(0,s.jsx)(n.h3,{id:"key-architectural-changes",children:"Key Architectural Changes"}),"\n",(0,s.jsx)(l.A,{chart:"\ngraph TD;\n  A[ROS 1 Architecture] --\x3e B[Single Master];\n  B --\x3e C[Central Point of Failure];\n  A --\x3e D[No Native Support for Multi-robot Systems];\n  A --\x3e E[Limited Security Features];\n\n  F[ROS 2 Architecture] --\x3e G[DDS-based Communication];\n  G --\x3e H[Distributed Architecture];\n  F --\x3e I[Real-time Performance];\n  F --\x3e J[Enhanced Security];\n"}),"\n",(0,s.jsx)(n.h3,{id:"dds-in-ros-2",children:"DDS in ROS 2"}),"\n",(0,s.jsx)(n.p,{children:"DDS (Data Distribution Service) is the underlying middleware that enables ROS 2's distributed architecture. DDS provides several benefits:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Decentralized Communication"}),": Nodes can communicate directly without requiring a central master"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Quality of Service (QoS) Settings"}),": Different communication patterns can be specified for different types of data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Performance"}),": DDS is designed for deterministic real-time systems"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-robot Systems"}),": Native support for communication between multiple robots"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Security"}),": Built-in security features for production environments"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"quality-of-service-qos-profiles",children:"Quality of Service (QoS) Profiles"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 introduces QoS profiles that allow fine-tuning of communication behavior:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reliability"}),": Choose between reliable (like TCP) or best-effort (like UDP) delivery"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Durability"}),": Specify whether late-joining subscribers should receive past messages"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"History"}),": Control how many messages to keep in history"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deadline"}),": Set deadlines for message delivery"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Liveliness"}),": Monitor the liveness of publishers and subscribers"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-by-step-labs",children:"Step-by-Step Labs"}),"\n",(0,s.jsx)(n.h3,{id:"lab-1-setting-up-ros-2-environment",children:"Lab 1: Setting up ROS 2 Environment"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Install ROS 2 Humble Hawksbill"})," (LTS version as of 2022):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Update locale settings\r\nlocale-gen en_US en_US.UTF-8\r\nexport LANG=en_US.UTF-8\r\n\r\n# Setup sources\r\nsudo apt update && sudo apt install curl gnupg lsb-release\r\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\r\n\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(source /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\r\n\r\n# Install ROS 2\r\nsudo apt update\r\nsudo apt install ros-humble-desktop\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Source the ROS 2 environment"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Set up ROS 2 environment permanently"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"lab-2-create-your-first-ros-2-workspace",children:"Lab 2: Create Your First ROS 2 Workspace"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Create a new workspace directory"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Build the workspace"})," (even though it's empty):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"colcon build --symlink-install\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Source the workspace"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"lab-3-run-the-talkerlistener-example",children:"Lab 3: Run the Talker/Listener Example"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Launch the talker node"})," in a new terminal:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\nros2 run demo_nodes_cpp talker\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Launch the listener node"})," in another terminal:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\nros2 run demo_nodes_cpp listener\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Observe the communication"})," between the nodes without any central master."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"runnable-code-example",children:"Runnable Code Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'// publisher_member_function.cpp\r\n#include "rclcpp/rclcpp.hpp"\r\n#include "std_msgs/msg/string.hpp"\r\n\r\n#include <memory>\r\n\r\nclass MinimalPublisher : public rclcpp::Node\r\n{\r\npublic:\r\n    MinimalPublisher()\r\n    : Node("minimal_publisher"), count_(0)\r\n    {\r\n        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);\r\n        timer_ = this->create_wall_timer(\r\n            500ms, std::bind(&MinimalPublisher::timer_callback, this));\r\n    }\r\n\r\nprivate:\r\n    void timer_callback()\r\n    {\r\n        auto message = std_msgs::msg::String();\r\n        message.data = "Hello, ROS 2! " + std::to_string(count_++);\r\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\r\n        publisher_->publish(message);\r\n    }\r\n    rclcpp::TimerBase::SharedPtr timer_;\r\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\r\n    size_t count_;\r\n};\r\n\r\nint main(int argc, char * argv[])\r\n{\r\n    rclcpp::init(argc, argv);\r\n    rclcpp::spin(std::make_shared<MinimalPublisher>());\r\n    rclcpp::shutdown();\r\n    return 0;\r\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# publisher_member_function.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\n\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass MinimalPublisher(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n        self.publisher_ = self.create_publisher(String, 'topic', 10);\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = 'Hello, ROS 2! %d' % self.i\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\r\n        self.i += 1\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    minimal_publisher = MinimalPublisher()\r\n\r\n    rclpy.spin(minimal_publisher)\r\n\r\n    # Destroy the node explicitly\r\n    minimal_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cmakeliststxt-for-the-c-publisher",children:"CMakeLists.txt for the C++ publisher:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmake",children:'cmake_minimum_required(VERSION 3.8)\r\nproject(demo_nodes_cpp)\r\n\r\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")\r\n  add_compile_options(-Wall -Wextra -Wpedantic)\r\nendif()\r\n\r\n# Find dependencies\r\nfind_package(ament_cmake REQUIRED)\r\nfind_package(rclcpp REQUIRED)\r\nfind_package(std_msgs REQUIRED)\r\n\r\n# Create executable\r\nadd_executable(talker src/publisher_member_function.cpp)\r\nament_target_dependencies(talker rclcpp std_msgs)\r\n\r\n# Install targets\r\ninstall(TARGETS\r\n  talker\r\n  DESTINATION lib/${PROJECT_NAME})\r\n\r\nament_package()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"packagexml-for-the-package",children:"package.xml for the package:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>demo_nodes_cpp</name>\r\n  <version>0.0.0</version>\r\n  <description>Example nodes for ROS 2</description>\r\n  <maintainer email="user@example.com">Your Name</maintainer>\r\n  <license>Apache License 2.0</license>\r\n\r\n  <buildtool_depend>ament_cmake</buildtool_depend>\r\n\r\n  <depend>rclcpp</depend>\r\n  <depend>std_msgs</depend>\r\n\r\n  <test_depend>ament_lint_auto</test_depend>\r\n  <test_depend>ament_lint_common</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_cmake</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"mini-project",children:"Mini-project"}),"\n",(0,s.jsx)(n.p,{children:"Create a simple ROS 2 package that includes:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"A publisher node that publishes the current system time"}),"\n",(0,s.jsx)(n.li,{children:"A subscriber node that receives and logs the time messages"}),"\n",(0,s.jsx)(n.li,{children:"A launch file that starts both nodes"}),"\n",(0,s.jsx)(n.li,{children:"Add a QoS profile parameter to the publisher (e.g., reliable vs best-effort)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Verify that the nodes can communicate without a central master by running them in separate terminals."}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"This chapter provided an overview of ROS 2 and why it represents a significant evolution from ROS 1. Key takeaways include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ROS 2 uses a distributed architecture based on DDS, eliminating the single point of failure"}),"\n",(0,s.jsx)(n.li,{children:"Quality of Service (QoS) profiles allow fine-tuning of communication behavior"}),"\n",(0,s.jsx)(n.li,{children:"ROS 2 is designed for production systems with security, real-time performance, and multi-robot support"}),"\n",(0,s.jsx)(n.li,{children:"The migration from ROS 1 requires understanding both architectural and API differences"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 is the current standard for robotic middleware in both research and production environments, making it essential knowledge for modern robotics practitioners."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);